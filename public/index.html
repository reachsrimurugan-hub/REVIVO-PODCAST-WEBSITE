<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Revivo</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header>
    <div class="top-bar">
      <img src="images/logo.png" alt="Logo" id="logo" />
      <div class="right-controls">
        <input type="text" id="search" placeholder="Search podcasts..." />
      </div>
    </div>
  </header>

  <div id="loader"></div>
  <main id="podcast-list"></main>

  <script>
    const loader = document.getElementById('loader');
    const podcastList = document.getElementById('podcast-list');

    async function fetchTrending() {
      loader.style.display = 'block';
      const res = await fetch('/api/trending');
      const data = await res.json();
      loader.style.display = 'none';
      displayPodcasts(data.podcasts || []);
    }

    async function searchPodcasts(query) {
      loader.style.display = 'block';
      const res = await fetch(`/api/search?q=${query}`);
      const data = await res.json();
      loader.style.display = 'none';
      displayPodcasts(data.results || []);
    }

    function displayPodcasts(podcasts) {
      podcastList.innerHTML = '';
      podcasts.forEach(podcast => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <img src="${podcast.image}" alt="${podcast.title}" />
          <h3>${podcast.title}</h3>
          ${podcast.audio ? `<audio controls src="${podcast.audio}"></audio>` : ''}
        `;
        podcastList.appendChild(card);
      });
    }

    document.getElementById('search').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        const query = e.target.value;
        searchPodcasts(query);
      }
    });

    document.getElementById('toggle-theme')?.addEventListener('click', () => {
      document.body.classList.toggle('dark');
    });

    fetchTrending();
  </script>

  <footer>
    <div class="footer-content">
      <div class="footer-left">
        <img src="images/logo.png" alt="Logo" class="footer-logo" />
        <p class="description">
          Revivo is more than a podcast â€” it's a mindset. Whether you're chasing success, struggling with doubt, or just need that weekly spark, this is where you level up.
          No fluff. Just fuel.
        </p>
      </div>
      <div class="footer-right">
        <h4>Start A Conversation</h4>
        <p>Email: imheisenberg0@gmail.com</p>
        <p>Contact: @revivo_creator</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 <b>Revivo</b>. All rights reserved.</p>
    </div>
  </footer>

  <script src="js/script.js"></script>
</body>
</html>
